(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{68:function(e,t,n){e.exports={loader:"Loader_loader__3byf3"}},69:function(e,t,n){e.exports={head:"PostPageId_head__2nuW4",error:"PostPageId_error__2uhWy",comments:"PostPageId_comments__3qeaF",comment:"PostPageId_comment__1V9B5"}},75:function(e,t,n){},76:function(e,t,n){e.exports={myBtn:"myButton_myBtn__39KlM"}},77:function(e,t,n){e.exports={myInp:"myInput_myInp__2CJ6Q"}},78:function(e,t,n){e.exports={sort:"MySelect_sort__2ywhj"}},79:function(e,t,n){},80:function(e,t,n){e.exports={post:"PostsItem_post__ssCXr"}},81:function(e,t,n){e.exports={postList:"PostList_postList__1PbSF"}},82:function(e,t,n){e.exports={modal:"MyModal_modal__2B9Fv",modalItems:"MyModal_modalItems__3yBdi"}},83:function(e,t,n){e.exports={navbar:"Navbar_navbar__1qw7c"}},84:function(e,t,n){e.exports={error:"Error_error__7LbC4"}},85:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(17),a=n.n(s),o=n(13),i=n(2),u=n(6),j=n.n(u),l=n(11),b=n(4),d=n(38),O=n(39),p=n(24),h=n.n(p),f=function(){function e(){Object(d.a)(this,e)}return Object(O.a)(e,null,[{key:"fetchPosts",value:function(){var e=Object(l.a)(j.a.mark((function e(t,n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("https://jsonplaceholder.typicode.com/posts",{params:{_limit:t,_page:n}});case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchPostId",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("https://jsonplaceholder.typicode.com/posts/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchComments",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("https://jsonplaceholder.typicode.com/posts/".concat(t,"/comments"));case 2:return n=e.sent,console.log(n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),x=function(e){var t=Object(c.useState)(!0),n=Object(b.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)(""),o=Object(b.a)(a,2),i=o[0],u=o[1];function d(){return(d=Object(l.a)(j.a.mark((function t(){var n=arguments;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(!0),t.next=4,e.apply(void 0,n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),u(t.t0.message);case 9:return t.prev=9,s(!1),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})))).apply(this,arguments)}return[r,i,function(){return d.apply(this,arguments)}]},v=n(0),m=n(68),y=function(){return Object(v.jsx)("div",{className:m.loader})},g=n(69),_=function(){var e=Object(c.useState)(),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)([]),a=Object(b.a)(s,2),o=a[0],u=a[1],d=Object(i.h)();console.log(d);var O=x(Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.fetchPostId(d.id);case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})))),p=Object(b.a)(O,3),h=p[0],m=p[1],_=p[2],P=x(Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.fetchComments(d.id);case 2:t=e.sent,u(t.data);case 4:case"end":return e.stop()}}),e)})))),w=Object(b.a)(P,3),C=w[0],k=(w[1],w[2]);return Object(c.useEffect)((function(){_(),k()}),[]),Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:g.head,children:["\u042d\u0442\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e\u0434 \u043d\u043e\u043c\u0435\u0440\u043e\u043c ",d.id,Object(v.jsx)("h2",{className:g.error,children:m||""}),h?Object(v.jsx)(y,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),null===n||void 0===n?void 0:n.title,Object(v.jsxs)("div",{className:g.body,children:[Object(v.jsx)("h5",{children:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435"}),null===n||void 0===n?void 0:n.body]})]})]}),C?Object(v.jsx)(y,{}):Object(v.jsx)("div",{className:g.comments,children:o.map((function(e){return Object(v.jsxs)("div",{className:g.comment,children:[e.email," \u043f\u0440\u043e\u043a\u043e\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043b:",Object(v.jsx)("div",{children:e.body})]})}))})]})},P=n(22),w=(n(75),function(e,t,n){var r=function(e,t){return Object(c.useMemo)((function(){return e?Object(P.a)(t).sort((function(t,n){return t[e].localeCompare(n[e])})):t}),[e,t])}(e,t);return Object(c.useMemo)((function(){return r.filter((function(e){return e.title.toLowerCase().includes(n.toLowerCase())}))}),[n,r])}),C=n(3),k=n(23),N=n(76);function I(e){var t=e.children,n=Object(k.a)(e,["children"]);return Object(v.jsx)("button",Object(C.a)(Object(C.a)({className:N.myBtn},n),{},{children:t}))}var S=n(77);function L(e){var t=e.children,n=Object(k.a)(e,["children"]);return Object(v.jsx)("input",Object(C.a)(Object(C.a)({className:S.myInp},n),{},{children:t}))}var M=function(e){var t=Object(c.useState)({title:"",body:""}),n=Object(b.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)(!1),o=Object(b.a)(a,2),i=o[0],u=o[1],j=Object(C.a)(Object(C.a)({},r),{},{id:Date.now()}),l={border:i?"1px solid red":"1px solid black"};return Object(v.jsxs)("div",{children:[Object(v.jsx)(L,{type:"text",style:l,value:r.title,onChange:function(e){return s(Object(C.a)(Object(C.a)({},r),{},{title:e.target.value}))},placeholder:i?"name post not found":"name post"}),Object(v.jsx)(L,{type:"text",style:l,value:r.body,onChange:function(e){return s(Object(C.a)(Object(C.a)({},r),{},{body:e.target.value}))},placeholder:i?"description post not found":"description post"}),Object(v.jsx)(I,{onClick:function(){u(!0),0!==r.title.length&&0!==r.body.length&&(e.setActive(!1),u(!1),s({title:"",body:""}),e.createPost(j))},children:"add post"})]})},B=n(78),F=function(e){var t=e.options,n=e.defaultValue,c=e.value,r=e.onChange;return Object(v.jsxs)("select",{value:c,onChange:function(e){return r(e.currentTarget.value)},className:B.sort,children:[Object(v.jsx)("option",{disabled:!0,value:"",children:n}),t.map((function(e){return Object(v.jsx)("option",{value:e.value,children:e.name},e.value)}))]})},A=function(e){var t=e.filter,n=e.setFilter;return Object(v.jsxs)("div",{children:[Object(v.jsx)(L,{placeholder:"\u041f\u043e\u0438\u0441\u043a",value:t.query,onChange:function(e){return n(Object(C.a)(Object(C.a)({},t),{},{query:e.currentTarget.value}))}}),Object(v.jsx)(F,{value:t.sort,onChange:function(e){return n(Object(C.a)(Object(C.a)({},t),{},{sort:e}))},defaultValue:"Sort",options:[{value:"name",name:"alphabetically"},{value:"description",name:"by content"}]})]})},q=n(89),E=n(88),T=(n(79),n(80)),J=function(e){var t=Object(i.g)();return console.log(t),Object(v.jsx)("div",{children:Object(v.jsx)(q.a,{children:e.posts.map((function(n){return Object(v.jsx)(E.a,{timeout:300,classNames:"post",children:Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:T.post,children:[Object(v.jsxs)("strong",{children:[n.id,".",n.title]}),n.body]}),Object(v.jsxs)("div",{className:T.buttons,children:[Object(v.jsx)(I,{onClick:function(){return t.push("/posts/".concat(n.id))},children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u0441\u0442"}),Object(v.jsx)(I,{onClick:function(){return e.removePost(n)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})},n.id)}))})})},V=n(81),W=function(e){return Object(v.jsxs)("div",{className:V.postList,children:[e.posts.length?Object(v.jsx)("h1",{children:e.title}):Object(v.jsx)("h1",{children:"Posts not found"}),Object(v.jsx)(J,{removePost:e.removePost,posts:e.posts})]})},D=n(82),R=function(e){var t=e.children,n=e.active,c=e.setActive;return Object(v.jsx)("div",{onClick:function(e){c(!n)},className:D.modal,children:Object(v.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:D.modalItems,children:t})})},K=function(e){for(var t={margin:"5px",minWidth:"50px"},n=Object(C.a)(Object(C.a)({},t),{color:"darkorchid",background:"white"}),c=[],r=1;r<=e.totalPages;r++)c.push(r);return Object(v.jsx)("div",{children:c.map((function(c){return Object(v.jsx)(I,{style:e.page===c?n:t,onClick:function(){e.setPage(c)},children:c},c)}))})},Q=function(e,t){return Math.ceil(e/t)};var X=function(){var e=Object(c.useState)(!1),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)({sort:"",query:""}),a=Object(b.a)(s,2),o=a[0],i=a[1],u=Object(c.useState)([]),d=Object(b.a)(u,2),O=d[0],p=d[1],h=Object(c.useState)(0),m=Object(b.a)(h,2),g=m[0],_=m[1],C=Object(c.useState)(10),k=Object(b.a)(C,2),N=k[0],S=(k[1],Object(c.useState)(1)),L=Object(b.a)(S,2),B=L[0],F=L[1],q=Object(c.useRef)();console.log(q);var E=w(o.sort,O,o.query),T=x(function(){var e=Object(l.a)(j.a.mark((function e(t,n){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.fetchPosts(t,n);case 2:c=e.sent,p(c.data),r=c.headers["x-total-count"],_(Q(r,t));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),J=Object(b.a)(T,3),V=J[0],D=J[1],X=J[2];return function(e,t,n,r){var s=Object(c.useRef)();Object(c.useEffect)((function(){n||(s.current&&(s.current=new IntersectionObserver((function(e){e[0].isIntersecting&&t&&r()}))),s.current&&s.current.observe(e.current))}),[n])}(q,B<g,V,(function(){F(B+1)})),Object(c.useEffect)((function(){X().then((function(e){return e}))}),[B,N]),Object(v.jsxs)("div",{className:"App",children:[n?Object(v.jsx)(R,{active:n,setActive:r,children:Object(v.jsx)(M,{setActive:r,createPost:function(e){p([e].concat(Object(P.a)(O)))}})}):"",Object(v.jsx)(A,{filter:o,setFilter:i}),Object(v.jsx)(I,{onClick:function(){r(!0)},children:"Create Post"}),D&&Object(v.jsxs)("h2",{style:{color:"red"},children:["\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 ",D]}),V?Object(v.jsx)(y,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)(W,{removePost:function(e){p(O.filter((function(t){return t.id!==e.id})))},posts:E,title:"\u0421\u043f\u0438\u0441\u043e\u043a \u042f\u041f"})," ",Object(v.jsx)("div",{ref:q,style:{height:"20px",backgroundColor:"white"}})]}),Object(v.jsx)(K,{totalPages:g,page:B,setPage:F})]})},z=n(83),G=function(){return Object(v.jsxs)("div",{className:z.navbar,children:[Object(v.jsx)(o.b,{to:"/about",children:"About"}),Object(v.jsx)("br",{}),Object(v.jsx)(o.b,{to:"/posts",children:"Posts"})]})},H=function(){return Object(v.jsx)("h1",{style:{textAlign:"center"},children:"\u042d\u0442\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u041f\u043e\u0441\u0442\u044b"})},U=n(84),Y=function(){return Object(v.jsxs)("div",{className:U.error,children:[Object(v.jsx)("h1",{children:"Error,\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(v.jsx)("img",{src:"https://www.seekpng.com/png/full/360-3605845_dog-holding-paper-in-mouth.png"})]})},Z=function(){return Object(v.jsxs)(o.a,{children:[Object(v.jsx)(G,{}),Object(v.jsxs)(i.d,{children:[Object(v.jsx)(i.b,{path:"/about",children:Object(v.jsx)(H,{})}),Object(v.jsx)(i.b,{exact:!0,path:"/posts",children:Object(v.jsx)(X,{})}),Object(v.jsx)(i.b,{exact:!0,path:"/posts/:id",children:Object(v.jsx)(_,{})}),Object(v.jsx)(i.b,{path:"/error",children:Object(v.jsx)(Y,{})}),Object(v.jsx)(i.a,{to:"/error"})]})]})},$=function(){return Object(v.jsx)(Z,{})},ee=(n(85),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,90)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))});a.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)($,{})}),document.getElementById("root")),ee()}},[[86,1,2]]]);
//# sourceMappingURL=main.b31cf710.chunk.js.map